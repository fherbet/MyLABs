ansible-playbook GET_DATA_PE.yml -l CPE1 -D

PLAY [get data pe] *************************************************************

TASK [MGMT / show ip bgp vpnv4 vrf oss-new-mplsmgmt 10.255.1.11/32 | i Originator] ***
skipping: [CPE1]

TASK [Display 'show ip bgp vpnv4 vrf oss-new-mplsmgmt on MGMT'] ****************
skipping: [CPE1]

TASK [extract values from sh ip bgp | i Originator] ****************************
skipping: [CPE1]

TASK [MGMT / show ip bgp 10.255.1.11/32  | i  from] ****************************
ok: [CPE1]

TASK [Display 'show ip bgp  on MGMT'] ******************************************
ok: [CPE1] => {
    "config": {
        "changed": false,
        "stdout": [
            "    10.253.1.2 (metric 20) from 10.255.1.1 (10.255.1.1)"
        ],
        "stdout_lines": [
            [
                "    10.253.1.2 (metric 20) from 10.255.1.1 (10.255.1.1)"
            ]
        ],
        "warnings": []
    }
}

TASK [extract values from sh ip bgp  | i  from] ********************************
ok: [CPE1] => (item=    10.253.1.2 (metric 20) from 10.255.1.1 (10.255.1.1))

TASK [debug] *******************************************************************
ok: [CPE1] => {
    "msg": [
        "10.255.1.1"
    ]
}

TASK [search MGMT_LB_PE reverse DNS] *******************************************
ok: [CPE1] => (item=10.255.1.1)

TASK [debug] *******************************************************************
ok: [CPE1] => {
    "msg": "Reverse DNS for [u'10.255.1.1'] is lo0-PE1."
}

TASK [remove lo0- from from reverse] *******************************************
ok: [CPE1] => (item=lo0-PE1.)

TASK [remove . from from SAR_NAME] *********************************************
ok: [CPE1] => (item=PE1.)

TASK [debug] *******************************************************************
ok: [CPE1] => {
    "msg": "after |replace Reverse DNS for [u'10.255.1.1'] is PE1"
}

TASK [debug] *******************************************************************
ok: [CPE1] => {
    "msg": "10.255.1.11 is advertised by PE1"
}

TASK [set fact SAR_OS for SAR OS] **********************************************
ok: [CPE1]

TASK [debug] *******************************************************************
ok: [CPE1] => {
    "msg": "PE1 OS is : iosxr"
}

TASK [lineinfile] **************************************************************
--- before: host_vars/CPE1.yml (content)
+++ after: host_vars/CPE1.yml (content)
@@ -24,7 +24,7 @@
 LINK_ID: MAD/MAD/IA-194201
 ACCESS_BW: 10 Mbps
 SERVICE_BW: 4 Mbps
-SAR:
+SAR: PE1
 SAR_INT:
 GRT_SUBVPN: TEST
 GLOBAL_ROUTING_OPTION: ROUTING_EU

changed: [CPE1]

TASK [sh run formal interface | remotewanip] ***********************************
ok: [CPE1]

TASK [print shiosxr] ***********************************************************
ok: [CPE1] => {
    "shiosxr": {
        "changed": false,
        "stdout": [
            "\ninterface GigabitEthernet0/0/0/1.15 ipv4 address 10.253.1.1 255.255.255.252"
        ],
        "stdout_lines": [
            [
                "",
                "interface GigabitEthernet0/0/0/1.15 ipv4 address 10.253.1.1 255.255.255.252"
            ]
        ],
        "warnings": []
    }
}

TASK [extract interfaces from shiosxr] *****************************************
ok: [CPE1] => (item=
interface GigabitEthernet0/0/0/1.15 ipv4 address 10.253.1.1 255.255.255.252)

TASK [debug] *******************************************************************
ok: [CPE1] => {
    "msg": [
        "GigabitEthernet0/0/0/1.15"
    ]
}

TASK [napalm_cli] **************************************************************
skipping: [CPE1]

TASK [print shios] *************************************************************
skipping: [CPE1]

TASK [set fact temp = shios.results] *******************************************
skipping: [CPE1]

TASK [extract interfaces from shios] *******************************************
skipping: [CPE1]

TASK [debug] *******************************************************************
skipping: [CPE1]

TASK [extract PE_INT and PE_VLANID] ********************************************
ok: [CPE1] => (item=GigabitEthernet0/0/0/1.15)

TASK [debug] *******************************************************************
ok: [CPE1] => {
    "msg": "PE_INT is GigabitEthernet0/0/0/1 and PE_VLANID is 15"
}

TASK [set fact for SAR_INT] ****************************************************
ok: [CPE1]

TASK [lineinfile] **************************************************************
--- before: host_vars/CPE1.yml (content)
+++ after: host_vars/CPE1.yml (content)
@@ -25,7 +25,7 @@
 ACCESS_BW: 10 Mbps
 SERVICE_BW: 4 Mbps
 SAR: PE1
-SAR_INT:
+SAR_INT: GigabitEthernet0/0/0/1
 GRT_SUBVPN: TEST
 GLOBAL_ROUTING_OPTION: ROUTING_EU
 SUBVPN:

changed: [CPE1]

TASK [set fact for PE_VLAN] ****************************************************
ok: [CPE1]

TASK [lineinfile] **************************************************************
ok: [CPE1]

TASK [set fact for SAR_VLAN_FACING_CPE_GRT] ************************************
ok: [CPE1]

TASK [lineinfile] **************************************************************
--- before: host_vars/CPE1.yml (content)
+++ after: host_vars/CPE1.yml (content)
@@ -26,6 +26,7 @@
 SERVICE_BW: 4 Mbps
 SAR: PE1
 SAR_INT: GigabitEthernet0/0/0/1
+SAR_VLAN_FACING_CPE_GRT: 15
 GRT_SUBVPN: TEST
 GLOBAL_ROUTING_OPTION: ROUTING_EU
 SUBVPN:

changed: [CPE1]

PLAY RECAP *********************************************************************
CPE1                       : ok=25   changed=3    unreachable=0    failed=0
