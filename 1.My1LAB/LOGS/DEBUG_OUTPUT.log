ansible-playbook CUST1_PLAY.yml -l CUST1 -D -t checkpostSA  -e debug_output=True

PLAY [IPVPN_FABRIC ALL IN ONE PLAYBOOK] *******************************************************************************************************************************************************************************************************

TASK [verify : REFRESH BGP sessions] **********************************************************************************************************************************************************************************************************
ok: [CUST_DC1]
ok: [CPE1]
ok: [CPE2]

TASK [verify : CHECK / Napalm Get Facts from Device] ******************************************************************************************************************************************************************************************
ok: [CPE2]
ok: [CUST_DC1]
ok: [CPE1]

TASK [verify : CHECK / Print BGP details] *****************************************************************************************************************************************************************************************************
ok: [CPE1] =>
  msg:
    10.253.1.1:
      address_family:
        ipv4:
          accepted_prefixes: 20
          received_prefixes: 20
          sent_prefixes: 5
      description: PE1
      is_enabled: true
      is_up: true
      local_as: 65505
      remote_as: 65500
      remote_id: 10.255.1.1
      uptime: 4304
    10.255.1.12:
      address_family:
        ipv4:
          accepted_prefixes: 6
          received_prefixes: 6
          sent_prefixes: 18
      description: CPE2
      is_enabled: true
      is_up: true
      local_as: 65505
      remote_as: 65505
      remote_id: 10.255.1.12
      uptime: 5659
ok: [CPE2] =>
  msg:
    10.253.2.1:
      address_family:
        ipv4:
          accepted_prefixes: 18
          received_prefixes: 18
          sent_prefixes: 6
      description: PE2
      is_enabled: true
      is_up: true
      local_as: 65505
      remote_as: 65500
      remote_id: 10.255.1.2
      uptime: 4081
    10.255.1.11:
      address_family:
        ipv4:
          accepted_prefixes: 18
          received_prefixes: 18
          sent_prefixes: 6
      description: CPE1
      is_enabled: true
      is_up: true
      local_as: 65505
      remote_as: 65505
      remote_id: 10.255.1.11
      uptime: 5569
ok: [CUST_DC1] =>
  msg:
    10.253.3.1:
      address_family:
        ipv4:
          accepted_prefixes: 18
          received_prefixes: 18
          sent_prefixes: 4
      description: MGMT
      is_enabled: true
      is_up: true
      local_as: 65505
      remote_as: 65500
      remote_id: 10.255.1.3
      uptime: 6033

TASK [verify : copy] **************************************************************************************************************************************************************************************************************************
--- before
+++ after: /tmp/tmpzV35JM
@@ -0,0 +1,70 @@
+ansible_facts:
+    napalm_bgp_neighbors:
+        global:
+            peers:
+                10.253.3.1:
+                    address_family:
+                        ipv4:
+                            accepted_prefixes: 18
+                            received_prefixes: 18
+                            sent_prefixes: 4
+                    description: MGMT
+                    is_enabled: true
+                    is_up: true
+                    local_as: 65505
+                    remote_as: 65500
+                    remote_id: 10.255.1.3
+                    uptime: 869
+            router_id: 10.255.1.13
+    napalm_facts:
+        fqdn: CUST_DC1.GMT.ipc.colt.net
+        hostname: CUST_DC1
+        interface_list:
+        - GigabitEthernet0/0
+        - GigabitEthernet0/1
+        - GigabitEthernet0/2
+        - GigabitEthernet0/3
+        - Loopback0
+        - Loopback99
+        - Loopback999
+        model: IOSv
+        os_version: IOSv Software (VIOS-ADVENTERPRISEK9-M), Version 15.6(2)T, RELEASE
+            SOFTWARE (fc2)
+        serial_number: 9OBI27OPZSD1W1HXPPIZ3
+        uptime: 900
+        vendor: Cisco
+    napalm_fqdn: CUST_DC1.GMT.ipc.colt.net
+    napalm_hostname: CUST_DC1
+    napalm_interface_list:
+    - GigabitEthernet0/0
+    - GigabitEthernet0/1
+    - GigabitEthernet0/2
+    - GigabitEthernet0/3
+    - Loopback0
+    - Loopback99
+    - Loopback999
+    napalm_interfaces_ip:
+        GigabitEthernet0/0:
+            ipv4:
+                10.223.0.254:
+                    prefix_length: 24
+        GigabitEthernet0/1:
+            ipv4:
+                10.253.3.2:
+                    prefix_length: 30
+        Loopback0:
+            ipv4:
+                10.255.1.13:
+                    prefix_length: 32
+        Loopback99:
+            ipv4:
+                8.8.8.8:
+                    prefix_length: 32
+    napalm_model: IOSv
+    napalm_os_version: IOSv Software (VIOS-ADVENTERPRISEK9-M), Version 15.6(2)T, RELEASE
+        SOFTWARE (fc2)
+    napalm_serial_number: 9OBI27OPZSD1W1HXPPIZ3
+    napalm_uptime: 900
+    napalm_vendor: Cisco
+changed: false
+failed: false

changed: [CUST_DC1 -> localhost]
--- before
+++ after: /tmp/tmpmOm64O
@@ -0,0 +1,87 @@
+ansible_facts:
+    napalm_bgp_neighbors:
+        global:
+            peers:
+                10.253.1.1:
+                    address_family:
+                        ipv4:
+                            accepted_prefixes: 20
+                            received_prefixes: 20
+                            sent_prefixes: 5
+                    description: PE1
+                    is_enabled: true
+                    is_up: true
+                    local_as: 65505
+                    remote_as: 65500
+                    remote_id: 10.255.1.1
+                    uptime: 708
+                10.255.1.12:
+                    address_family:
+                        ipv4:
+                            accepted_prefixes: 6
+                            received_prefixes: 6
+                            sent_prefixes: 18
+                    description: CPE2
+                    is_enabled: true
+                    is_up: true
+                    local_as: 65505
+                    remote_as: 65505
+                    remote_id: 10.255.1.12
+                    uptime: 823
+            router_id: 10.255.1.11
+    napalm_facts:
+        fqdn: CPE1.PE1.ipc.colt.net
+        hostname: CPE1
+        interface_list:
+        - GigabitEthernet0/0
+        - GigabitEthernet0/1
+        - GigabitEthernet0/1.15
+        - GigabitEthernet0/2
+        - GigabitEthernet0/2.3
+        - GigabitEthernet0/3
+        - Loopback0
+        - Loopback999
+        - NVI0
+        model: IOSv
+        os_version: IOSv Software (VIOS-ADVENTERPRISEK9-M), Version 15.6(2)T, RELEASE
+            SOFTWARE (fc2)
+        serial_number: 9RWJ4DFRMAF3RZJGT6D2O
+        uptime: 900
+        vendor: Cisco
+    napalm_fqdn: CPE1.PE1.ipc.colt.net
+    napalm_hostname: CPE1
+    napalm_interface_list:
+    - GigabitEthernet0/0
+    - GigabitEthernet0/1
+    - GigabitEthernet0/1.15
+    - GigabitEthernet0/2
+    - GigabitEthernet0/2.3
+    - GigabitEthernet0/3
+    - Loopback0
+    - Loopback999
+    - NVI0
+    napalm_interfaces_ip:
+        GigabitEthernet0/0:
+            ipv4:
+                10.223.1.252:
+                    prefix_length: 24
+        GigabitEthernet0/1.15:
+            ipv4:
+                10.253.1.2:
+                    prefix_length: 30
+        GigabitEthernet0/2.3:
+            ipv4:
+                10.255.80.17:
+                    prefix_length: 30
+        Loopback0:
+            ipv4:
+                10.255.1.11:
+                    prefix_length: 32
+    napalm_model: IOSv
+    napalm_os_version: IOSv Software (VIOS-ADVENTERPRISEK9-M), Version 15.6(2)T, RELEASE
+        SOFTWARE (fc2)
+    napalm_serial_number: 9RWJ4DFRMAF3RZJGT6D2O
+    napalm_uptime: 900
+    napalm_vendor: Cisco
+changed: false
+failed: false

changed: [CPE1 -> localhost]
--- before
+++ after: /tmp/tmpF9vJG4
@@ -0,0 +1,87 @@
+ansible_facts:
+    napalm_bgp_neighbors:
+        global:
+            peers:
+                10.253.2.1:
+                    address_family:
+                        ipv4:
+                            accepted_prefixes: 18
+                            received_prefixes: 18
+                            sent_prefixes: 6
+                    description: PE2
+                    is_enabled: true
+                    is_up: true
+                    local_as: 65505
+                    remote_as: 65500
+                    remote_id: 10.255.1.2
+                    uptime: 669
+                10.255.1.11:
+                    address_family:
+                        ipv4:
+                            accepted_prefixes: 18
+                            received_prefixes: 18
+                            sent_prefixes: 6
+                    description: CPE1
+                    is_enabled: true
+                    is_up: true
+                    local_as: 65505
+                    remote_as: 65505
+                    remote_id: 10.255.1.11
+                    uptime: 795
+            router_id: 10.255.1.12
+    napalm_facts:
+        fqdn: CPE2.PE2.ipc.colt.net
+        hostname: CPE2
+        interface_list:
+        - GigabitEthernet0/0
+        - GigabitEthernet0/1
+        - GigabitEthernet0/1.25
+        - GigabitEthernet0/2
+        - GigabitEthernet0/2.3
+        - GigabitEthernet0/3
+        - Loopback0
+        - Loopback999
+        - NVI0
+        model: IOSv
+        os_version: IOSv Software (VIOS-ADVENTERPRISEK9-M), Version 15.6(2)T, RELEASE
+            SOFTWARE (fc2)
+        serial_number: 9JQ6RAUQLWTZ38N21U7KA
+        uptime: 840
+        vendor: Cisco
+    napalm_fqdn: CPE2.PE2.ipc.colt.net
+    napalm_hostname: CPE2
+    napalm_interface_list:
+    - GigabitEthernet0/0
+    - GigabitEthernet0/1
+    - GigabitEthernet0/1.25
+    - GigabitEthernet0/2
+    - GigabitEthernet0/2.3
+    - GigabitEthernet0/3
+    - Loopback0
+    - Loopback999
+    - NVI0
+    napalm_interfaces_ip:
+        GigabitEthernet0/0:
+            ipv4:
+                10.223.1.253:
+                    prefix_length: 24
+        GigabitEthernet0/1.25:
+            ipv4:
+                10.253.2.2:
+                    prefix_length: 30
+        GigabitEthernet0/2.3:
+            ipv4:
+                10.255.80.18:
+                    prefix_length: 30
+        Loopback0:
+            ipv4:
+                10.255.1.12:
+                    prefix_length: 32
+    napalm_model: IOSv
+    napalm_os_version: IOSv Software (VIOS-ADVENTERPRISEK9-M), Version 15.6(2)T, RELEASE
+        SOFTWARE (fc2)
+    napalm_serial_number: 9JQ6RAUQLWTZ38N21U7KA
+    napalm_uptime: 840
+    napalm_vendor: Cisco
+changed: false
+failed: false

changed: [CPE2 -> localhost]

TASK [verify : CHECK / Ping Remote Test IP(s) from source 10.223.1.252 / 255.255.255.0] *******************************************************************************************************************************************************
ok: [CUST_DC1] => (item=10.223.0.254)
ok: [CPE2] => (item=10.223.0.254)
ok: [CPE1] => (item=10.223.0.254)
ok: [CUST_DC1] => (item=8.8.8.8)
ok: [CPE2] => (item=8.8.8.8)
ok: [CPE1] => (item=8.8.8.8)

TASK [verify : copy] **************************************************************************************************************************************************************************************************************************
--- before
+++ after: /tmp/tmp4lQbj2
@@ -0,0 +1,85 @@
+changed: false
+msg: All items completed
+results:
+-   _ansible_item_result: true
+    _ansible_no_log: false
+    _ansible_parsed: true
+    changed: false
+    failed: false
+    invocation:
+        module_args:
+            count: '5'
+            destination: 10.223.0.254
+            dev_os: ios
+            hostname: 10.255.1.11
+            optional_args: null
+            password: VALUE_SPECIFIED_IN_NO_LOG_PARAMETER
+            ping_timeout: null
+            provider: null
+            size: null
+            source: 10.223.1.252
+            timeout: 60
+            ttl: null
+            username: osainstall
+            vrf: null
+    item: 10.223.0.254
+    results:
+        success:
+            packet_loss: 0
+            probes_sent: 5
+            results:
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            rtt_avg: 53.0
+            rtt_max: 201.0
+            rtt_min: 11.0
+            rtt_stddev: 0.0
+-   _ansible_item_result: true
+    _ansible_no_log: false
+    _ansible_parsed: true
+    changed: false
+    failed: false
+    invocation:
+        module_args:
+            count: '5'
+            destination: 8.8.8.8
+            dev_os: ios
+            hostname: 10.255.1.11
+            optional_args: null
+            password: VALUE_SPECIFIED_IN_NO_LOG_PARAMETER
+            ping_timeout: null
+            provider: null
+            size: null
+            source: 10.223.1.252
+            timeout: 60
+            ttl: null
+            username: osainstall
+            vrf: null
+    item: 8.8.8.8
+    results:
+        success:
+            packet_loss: 0
+            probes_sent: 5
+            results:
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            rtt_avg: 52.0
+            rtt_max: 217.0
+            rtt_min: 10.0
+            rtt_stddev: 0.0

changed: [CPE1 -> localhost]
--- before
+++ after: /tmp/tmpqUBXSv
@@ -0,0 +1,85 @@
+changed: false
+msg: All items completed
+results:
+-   _ansible_item_result: true
+    _ansible_no_log: false
+    _ansible_parsed: true
+    changed: false
+    failed: false
+    invocation:
+        module_args:
+            count: '5'
+            destination: 10.223.0.254
+            dev_os: ios
+            hostname: 10.255.1.12
+            optional_args: null
+            password: VALUE_SPECIFIED_IN_NO_LOG_PARAMETER
+            ping_timeout: null
+            provider: null
+            size: null
+            source: 10.223.1.253
+            timeout: 60
+            ttl: null
+            username: osainstall
+            vrf: null
+    item: 10.223.0.254
+    results:
+        success:
+            packet_loss: 0
+            probes_sent: 5
+            results:
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            rtt_avg: 98.0
+            rtt_max: 427.0
+            rtt_min: 10.0
+            rtt_stddev: 0.0
+-   _ansible_item_result: true
+    _ansible_no_log: false
+    _ansible_parsed: true
+    changed: false
+    failed: false
+    invocation:
+        module_args:
+            count: '5'
+            destination: 8.8.8.8
+            dev_os: ios
+            hostname: 10.255.1.12
+            optional_args: null
+            password: VALUE_SPECIFIED_IN_NO_LOG_PARAMETER
+            ping_timeout: null
+            provider: null
+            size: null
+            source: 10.223.1.253
+            timeout: 60
+            ttl: null
+            username: osainstall
+            vrf: null
+    item: 8.8.8.8
+    results:
+        success:
+            packet_loss: 0
+            probes_sent: 5
+            results:
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            rtt_avg: 14.0
+            rtt_max: 21.0
+            rtt_min: 8.0
+            rtt_stddev: 0.0

changed: [CPE2 -> localhost]
--- before
+++ after: /tmp/tmpc1MrFC
@@ -0,0 +1,85 @@
+changed: false
+msg: All items completed
+results:
+-   _ansible_item_result: true
+    _ansible_no_log: false
+    _ansible_parsed: true
+    changed: false
+    failed: false
+    invocation:
+        module_args:
+            count: '5'
+            destination: 10.223.0.254
+            dev_os: ios
+            hostname: 10.255.1.13
+            optional_args: null
+            password: VALUE_SPECIFIED_IN_NO_LOG_PARAMETER
+            ping_timeout: null
+            provider: null
+            size: null
+            source: 10.223.0.254
+            timeout: 60
+            ttl: null
+            username: osainstall
+            vrf: null
+    item: 10.223.0.254
+    results:
+        success:
+            packet_loss: 0
+            probes_sent: 5
+            results:
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            -   ip_address: 10.223.0.254
+                rtt: 0.0
+            rtt_avg: 3.0
+            rtt_max: 5.0
+            rtt_min: 2.0
+            rtt_stddev: 0.0
+-   _ansible_item_result: true
+    _ansible_no_log: false
+    _ansible_parsed: true
+    changed: false
+    failed: false
+    invocation:
+        module_args:
+            count: '5'
+            destination: 8.8.8.8
+            dev_os: ios
+            hostname: 10.255.1.13
+            optional_args: null
+            password: VALUE_SPECIFIED_IN_NO_LOG_PARAMETER
+            ping_timeout: null
+            provider: null
+            size: null
+            source: 10.223.0.254
+            timeout: 60
+            ttl: null
+            username: osainstall
+            vrf: null
+    item: 8.8.8.8
+    results:
+        success:
+            packet_loss: 0
+            probes_sent: 5
+            results:
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            -   ip_address: 8.8.8.8
+                rtt: 0.0
+            rtt_avg: 3.0
+            rtt_max: 5.0
+            rtt_min: 2.0
+            rtt_stddev: 0.0

changed: [CUST_DC1 -> localhost]

TASK [verify : CHECK / print PINGTEST from source 10.223.1.252 / 255.255.255.0] ***************************************************************************************************************************************************************
ok: [CPE1] =>
  msg:
  - success:
      packet_loss: 0
      probes_sent: 5
      results:
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      rtt_avg: 53.0
      rtt_max: 201.0
      rtt_min: 11.0
      rtt_stddev: 0.0
  - success:
      packet_loss: 0
      probes_sent: 5
      results:
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      rtt_avg: 52.0
      rtt_max: 217.0
      rtt_min: 10.0
      rtt_stddev: 0.0
ok: [CPE2] =>
  msg:
  - success:
      packet_loss: 0
      probes_sent: 5
      results:
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      rtt_avg: 98.0
      rtt_max: 427.0
      rtt_min: 10.0
      rtt_stddev: 0.0
  - success:
      packet_loss: 0
      probes_sent: 5
      results:
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      rtt_avg: 14.0
      rtt_max: 21.0
      rtt_min: 8.0
      rtt_stddev: 0.0
ok: [CUST_DC1] =>
  msg:
  - success:
      packet_loss: 0
      probes_sent: 5
      results:
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      - ip_address: 10.223.0.254
        rtt: 0.0
      rtt_avg: 3.0
      rtt_max: 5.0
      rtt_min: 2.0
      rtt_stddev: 0.0
  - success:
      packet_loss: 0
      probes_sent: 5
      results:
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      - ip_address: 8.8.8.8
        rtt: 0.0
      rtt_avg: 3.0
      rtt_max: 5.0
      rtt_min: 2.0
      rtt_stddev: 0.0

TASK [verify : CHECK NAT / WITH SH IP NA TR] **************************************************************************************************************************************************************************************************
ok: [CPE2]
ok: [CUST_DC1]
ok: [CPE1]

TASK [verify : CHECK NAT / Print SH IP NA TR] *************************************************************************************************************************************************************************************************
ok: [CPE1] =>
  msg:
  - - ''
ok: [CPE2] =>
  msg:
  - - Pro Inside global         Inside local          Outside local         Outside global
    - icmp 10.123.1.252:9       10.223.1.252:9        8.8.8.8:9             8.8.8.8:9
    - icmp 10.123.1.253:9       10.223.1.253:9        8.8.8.8:9             8.8.8.8:9
    - '--- 10.123.1.252          10.223.1.252          ---                   ---'
    - '--- 10.123.1.253          10.223.1.253          ---                   ---'
ok: [CUST_DC1] =>
  msg:
  - - ''

TASK [verify : copy] **************************************************************************************************************************************************************************************************************************
--- before
+++ after: /tmp/tmpyoZiYX
@@ -0,0 +1 @@
+-   - ''

changed: [CPE1 -> localhost]
--- before
+++ after: /tmp/tmpvpSHXY
@@ -0,0 +1,6 @@
+-   - Pro Inside global         Inside local          Outside local         Outside
+        global
+    - icmp 10.123.1.252:9       10.223.1.252:9        8.8.8.8:9             8.8.8.8:9
+    - icmp 10.123.1.253:9       10.223.1.253:9        8.8.8.8:9             8.8.8.8:9
+    - '--- 10.123.1.252          10.223.1.252          ---                   ---'
+    - '--- 10.123.1.253          10.223.1.253          ---                   ---'

changed: [CPE2 -> localhost]
--- before
+++ after: /tmp/tmpAAWUIN
@@ -0,0 +1 @@
+-   - ''

changed: [CUST_DC1 -> localhost]

PLAY RECAP ************************************************************************************************************************************************************************************************************************************
CPE1                       : ok=10   changed=3    unreachable=0    failed=0
CPE2                       : ok=10   changed=3    unreachable=0    failed=0
CUST_DC1                   : ok=10   changed=3    unreachable=0    failed=0
